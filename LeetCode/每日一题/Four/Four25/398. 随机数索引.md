#### [398. éšæœºæ•°ç´¢å¼•](https://leetcode-cn.com/problems/random-pick-index/)

éš¾åº¦ä¸­ç­‰146

ç»™å®šä¸€ä¸ªå¯èƒ½å«æœ‰é‡å¤å…ƒç´ çš„æ•´æ•°æ•°ç»„ï¼Œè¦æ±‚éšæœºè¾“å‡ºç»™å®šçš„æ•°å­—çš„ç´¢å¼•ã€‚ æ‚¨å¯ä»¥å‡è®¾ç»™å®šçš„æ•°å­—ä¸€å®šå­˜åœ¨äºæ•°ç»„ä¸­ã€‚

**æ³¨æ„ï¼š**
æ•°ç»„å¤§å°å¯èƒ½éå¸¸å¤§ã€‚ ä½¿ç”¨å¤ªå¤šé¢å¤–ç©ºé—´çš„è§£å†³æ–¹æ¡ˆå°†ä¸ä¼šé€šè¿‡æµ‹è¯•ã€‚

**ç¤ºä¾‹:**

```
int[] nums = new int[] {1,2,3,3,3};
Solution solution = new Solution(nums);

// pick(3) åº”è¯¥è¿”å›ç´¢å¼• 2,3 æˆ–è€… 4ã€‚æ¯ä¸ªç´¢å¼•çš„è¿”å›æ¦‚ç‡åº”è¯¥ç›¸ç­‰ã€‚
solution.pick(3);

// pick(1) åº”è¯¥è¿”å› 0ã€‚å› ä¸ºåªæœ‰nums[0]ç­‰äº1ã€‚
solution.pick(1);
```

**æš´åŠ›è¶…æ—¶**ğŸ˜¢

```java
//æš´åŠ›éšæœº,æ•°ç»„å¤ªé•¿ä¸è¡Œ
public class Solution {
    int[] nums;
    int first, second;
    Random random;

    public Solution(int[] nums) {
        first = -1;
        second = -1;
        random = new Random();
        this.nums = nums;
    }

    public int pick(int target) {
        for (int i = 0; i < nums.length; i++) {
            if (nums[i] == target) {
                first = i;
                break;
            }
        }
        for (int i = nums.length - 1; i >= 0; i--) {
            if (nums[i] == target) {
                second = i;
                break;
            }
        }
        return first > second ? -1 : first + random.nextInt(second - first);
    }
}
```

**æ°´å¡˜æŠ½æ ·**ğŸ˜

* ç­‰æ¦‚ç‡,,å¦‚æœ[0,,count-1]ä¹Ÿå°±æ˜¯countä¸ªæ•°,,æŠ½æ ·æŠ½åˆ°ç¬¬ä¸€ä¸ªæ•°,è¿”å›å³å¯

```java
//æ°´å¡˜æŠ½æ ·æ³•
class waterPick {
    int[] arr;
    Random random;

    public waterPick(int[] nums) {
        arr = nums;
        random = new Random();
    }

    public int pick(int target) {
        int res = 0;
        int count = 0;
        for (int i = 0; i < arr.length; i++) {
            if (arr[i] == target) {
                count++;
                if (random.nextInt(count) == 0) {
                    //æ°´å¡˜æŠ½æ ·,å¦‚æœåœ¨[0,,count-1]çš„æƒ…å†µä¸‹æŠ½åˆ°ç¬¬ä¸€ä¸ª,ä¹Ÿå°±æ˜¯ç­‰æ¦‚ç‡æŠ½åˆ°
                    res = i;
                }
            }
        }
        return res;
    }
}
```