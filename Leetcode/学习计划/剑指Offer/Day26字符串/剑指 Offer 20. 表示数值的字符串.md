#### [剑指 Offer 20. 表示数值的字符串](https://leetcode.cn/problems/biao-shi-shu-zhi-de-zi-fu-chuan-lcof/)

难度中等339收藏分享切换为英文接收动态反馈

请实现一个函数用来判断字符串是否表示**数值**（包括整数和小数）。

**数值**（按顺序）可以分成以下几个部分：

1. 若干空格
2. 一个 **小数** 或者 **整数**
3. （可选）一个 `'e'` 或 `'E'` ，后面跟着一个 **整数**
4. 若干空格

**小数**（按顺序）可以分成以下几个部分：

1. （可选）一个符号字符（`'+'` 或 `'-'`）
2. 下述格式之一：
    1. 至少一位数字，后面跟着一个点 `'.'`
    2. 至少一位数字，后面跟着一个点 `'.'` ，后面再跟着至少一位数字
    3. 一个点 `'.'` ，后面跟着至少一位数字

**整数**（按顺序）可以分成以下几个部分：

1. （可选）一个符号字符（`'+'` 或 `'-'`）
2. 至少一位数字

部分**数值**列举如下：

- `["+100", "5e2", "-123", "3.1416", "-1E-16", "0123"]`

部分**非数值**列举如下：

- `["12e", "1a3.14", "1.2.3", "+-5", "12e+5.4"]`

**示例 1：**

```
输入：s = "0"
输出：true
```

**示例 2：**

```
输入：s = "e"
输出：false
```

**示例 3：**

```
输入：s = "."
输出：false
```

**示例 4：**

```
输入：s = "    .1  "
输出：true
```

**提示：**

- `1 <= s.length <= 20`
- `s` 仅含英文字母（大写和小写），数字（`0-9`），加号 `'+'` ，减号 `'-'` ，空格 `' '` 或者点 `'.'` 。

#### 思路

> *判定是否为数值*
>
> ​    *‘.’出现正确情况：只出现一次，且在e的前面*
>
> ​    *‘e’出现正确情况：只出现一次，且出现前有数字*
>
> ​    *‘+’‘-’出现正确情况：只能在开头和e后一位*

#### Code

```java
public class Solution20 {
    /*
         判定是否为数值
        ‘.’出现正确情况：只出现一次，且在e的前面
        ‘e’出现正确情况：只出现一次，且出现前有数字
        ‘+’‘-’出现正确情况：只能在开头和e后一位
     */
    public boolean isNumber(String s) {
        if (s == null || s.length() == 0) {
            return false;
        }
        s = s.trim();//去掉空格
        boolean isNum = false;
        boolean isDot = false;
        boolean isE = false;
        for (int i = 0; i < s.length(); i++) {
            //1.判定为数字,则标记为isNum
            if (s.charAt(i) >= '0' && s.charAt(i) <= '0') {
                isNum = true;//标记为数字
            } else if (s.charAt(i) == '.' && !isDot && !isE) {
                isDot = true;//判定'.'出现的位置合法
            } else if ((s.charAt(i) == 'e' || s.charAt(i) == 'E') && isNum && !isE) {
                isE = true;//判定'e'出现的位置合法
                isNum = false;//避免出现123e的不合法情况,因此出现'e'后就标记isNum为false
            } else if ((s.charAt(i) == '+' || s.charAt(i) == '-') && (i == 0 || s.charAt(i - 1) == 'e' || s.charAt(i - 1) == 'E')) {
                //判定'+-'号,只能出现在开头或者是e的后一位
            } else {
                //其他情况都是不合法的
                return false;
            }
        }
        //这里避免出现e之后再没有数字了,如果e之后出现了数字那么isNum也就是合法的
        // 如果没有出现数字,123e显然不合法,isNum=false
        return isNum;
    }
}
```